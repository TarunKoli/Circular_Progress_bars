<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript Circular Bar</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <div class="progress" style="--clr:#04fc43;">
            <div class="dot"></div>
            <svg>
                <circle cx="80" cy="80" r="80"></circle>
                <circle class="animate" cx="80" cy="80" r="80"></circle>
            </svg>
            <div class="number">
                <h2>0<span>%</span></h2>
                <p>Html</p>
            </div>
        </div>
        <div class="progress" style="--clr:#06ccff;">
            <div class="dot"></div>
            <svg>
                <circle cx="80" cy="80" r="80"></circle>
                <circle class="animate" cx="80" cy="80" r="80"></circle>
            </svg>
            <div class="number">
                <h2>0<span>%</span></h2>
                <p>Html</p>
            </div>
        </div>
        <div class="progress" style="--clr:#ff00be;">
            <div class="dot"></div>
            <svg>
                <circle cx="80" cy="80" r="80"></circle>
                <circle class="animate" cx="80" cy="80" r="80"></circle>
            </svg>
            <div class="number">
                <h2>0<span>%</span></h2>
                <p>Html</p>
            </div>
        </div>
        <div class="progress" style="--clr:#fee800;">
            <div class="dot"></div>
            <svg>
                <circle cx="80" cy="80" r="80"></circle>
                <circle class="animate" cx="80" cy="80" r="80"></circle>
            </svg>
            <div class="number">
                <h2>0<span>%</span></h2>
                <p>Html</p>
            </div>
        </div>
    </div>  

    <script>
        var progresses = document.querySelectorAll('.progress');
        
        progresses.forEach((progress,i)=>{
            let randNo = Math.random()*100;
            progress_bar(progress,parseInt((randNo<50 ? randNo+50 : randNo)));
        })    
    
        function progress_bar(parent,prog){
           var element = parent.querySelector('.animate');
           var number = parent.querySelector('.number h2');
           var dot = parent.querySelector('.dot');
           
            // var r = document.querySelector(':root');
            var progress=0;

            // r.style.setProperty('--num',progress);

            const id1 = setInterval(()=>{
                progress++;
                if(progress>=prog){
                    clearInterval(id1);
                }
                // r.style.setProperty('--num',progress);
                dot.style.transform = `rotate(${3.6 * progress}deg)`;
                element.style.strokeDashoffset = 502 - (502 * progress) / 100;
                number.textContent=progress+"%";
                
            },25);
        }
        

    </script>
</body>
</html>